(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,n){e.exports=n(24)},21:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),r=n(9),u=n.n(r),c=(n(21),n(0)),i=n.n(c),s=n(10),d=n(2),l=n(8),p=n(12),m=n(13),f=n(3),h=n(4),v=n(6),b=n(5),w=n(7),O=function(e){function t(e,n,a){var o,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(f.a)(this,t),(o=Object(v.a)(this,Object(b.a)(t).call(this,n))).emitter=e,o.key=n,o.component=t.component;var u=a.data[n]||0;return a.data[n]=u,o.props={readonly:r,value:u,onChange:function(e){o.setValue(e),o.emitter.trigger("process")}},o}return Object(w.a)(t,e),Object(h.a)(t,[{key:"setValue",value:function(e){this.props.value=e,this.putData(this.key,e),this.update()}}]),t}(d.c.Control);O.component=function(e){var t=e.value,n=e.onChange;return o.a.createElement("input",{type:"number",value:t,onChange:function(e){return n(+e.target.value)},onPointerMove:function(e){return e.stopPropagation()}})};var g=new d.c.Socket("Number value"),k=new d.c.Socket("Data as JSON"),j=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(b.a)(t).call(this,"Number"))}return Object(w.a)(t,e),Object(h.a)(t,[{key:"builder",value:function(e){var t=new d.c.Output("num","Number",g),n=new O(this.editor,"num",e);return e.addControl(n).addOutput(t)}},{key:"worker",value:function(e,t,n){n.num=e.data.num}}]),t}(d.c.Component),y=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.node,n=e.bindSocket,a=e.bindControl,r=this.state,u=r.outputs,c=r.controls,i=r.inputs,s=r.selected;return o.a.createElement("div",{className:"node ".concat(s),style:{background:"grey"}},o.a.createElement("div",{className:"title"},"<<"," ",t.name," ",">>"),u.map(function(e){return o.a.createElement("div",{className:"output",key:e.key},o.a.createElement("div",{className:"output-title"},e.name),o.a.createElement(l.c,{type:"output",socket:e.socket,io:e,innerRef:n}))}),c.map(function(e){return o.a.createElement(l.a,{className:"control",key:e.key,control:e,innerRef:a})}),i.map(function(e){return o.a.createElement("div",{className:"input",key:e.key},o.a.createElement(l.c,{type:"input",socket:e.socket,io:e,innerRef:n}),!e.showControl()&&o.a.createElement("div",{className:"input-title"},e.name),e.showControl()&&o.a.createElement(l.a,{className:"input-control",control:e.control,innerRef:a}))}))}}]),t}(l.b),N=function(e){function t(){var e;return Object(f.a)(this,t),(e=Object(v.a)(this,Object(b.a)(t).call(this,"Add"))).data.component=y,e}return Object(w.a)(t,e),Object(h.a)(t,[{key:"builder",value:function(e){var t=new d.c.Input("num1","Number",g),n=new d.c.Input("num2","Number2",g),a=new d.c.Output("num","Number",g);return t.addControl(new O(this.editor,"num1",e)),n.addControl(new O(this.editor,"num2",e)),e.addInput(t).addInput(n).addControl(new O(this.editor,"preview",e,!0)).addOutput(a)}},{key:"worker",value:function(e,t,n){var a=(t.num1.length?t.num1[0]:e.data.num1)+(t.num2.length?t.num2[0]:e.data.num2);this.editor.nodes.find(function(t){return t.id===e.id}).controls.get("preview").setValue(a),n.num=a}}]),t}(d.c.Component),C=function(e){function t(){var e;return Object(f.a)(this,t),(e=Object(v.a)(this,Object(b.a)(t).call(this,"Count"))).data.component=y,e}return Object(w.a)(t,e),Object(h.a)(t,[{key:"builder",value:function(e){var t=new d.c.Input("data","Data",k),n=new d.c.Output("num","Number",g);return t.addControl(new O(this.editor,"data",e)),e.addInput(t).addControl(new O(this.editor,"preview",e,!0)).addOutput(n)}},{key:"worker",value:function(e,t,n){var a=(t.data.length?t.data[0]:e.data.data).length;this.editor.nodes.find(function(t){return t.id===e.id}).controls.get("preview").setValue(a),n.num=a}}]),t}(d.c.Component),E=n(14),x=n.n(E),I=function(e){function t(e,n,a){var o,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(f.a)(this,t),(o=Object(v.a)(this,Object(b.a)(t).call(this,n))).emitter=e,o.key=n,o.component=t.component;var u="https://gist.githubusercontent.com/mbostock/4063570/raw/11847750012dfe5351ee1eb290d2a254a67051d0/flare.csv";return a.data[n]=u,o.props={readonly:r,value:u,onChange:function(e){o.setValue(e),o.emitter.trigger("process")}},o}return Object(w.a)(t,e),Object(h.a)(t,[{key:"setValue",value:function(e){this.props.value=e,this.putData(this.key,e),this.update()}}]),t}(d.c.Control);I.component=function(e){var t=e.value,n=e.onChange;return o.a.createElement("input",{type:"text",value:t,onChange:function(e){return n(e.target.value)},onPointerMove:function(e){return e.stopPropagation()}})};var V=function(){var e=Object(s.a)(i.a.mark(function e(t){var n,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e){return new Promise(function(t){x.a.parse(e,{download:!0,complete:function(e){t(e.data)}})})},e.next=3,n(t);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),D=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(b.a)(t).call(this,"File"))}return Object(w.a)(t,e),Object(h.a)(t,[{key:"builder",value:function(e){var t=new d.c.Output("data","Data",k),n=new I(this.editor,"filename",e);return e.addControl(n).addOutput(t)}},{key:"worker",value:function(e,t,n){if(e.data.filename&&e.data.filename.length>0){var a=V(e.data.filename);e.data.data=a}else e.data.data={};n.data=e.data.data,console.log(e.data),console.log(e.data.data)}}]),t}(d.c.Component);n(23);function P(){return(P=Object(s.a)(i.a.mark(function e(t){var n,a,o,r,u,c,f,h;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[new j,new N,new D,new C],(a=new d.c.NodeEditor("demo@0.1.0",t)).use(p.a),a.use(l.d),o=new d.c.Engine("demo@0.1.0"),n.forEach(function(e){a.register(e),o.register(e)}),e.next=8,n[0].createNode({num:2});case 8:return r=e.sent,e.next=11,n[0].createNode({num:3});case 11:return u=e.sent,e.next=14,n[1].createNode();case 14:return c=e.sent,e.next=17,n[2].createNode();case 17:return f=e.sent,e.next=20,n[3].createNode();case 20:h=e.sent,r.position=[80,200],u.position=[80,400],c.position=[500,240],f.position=[80,10],h.position=[500,10],a.addNode(r),a.addNode(u),a.addNode(c),a.addNode(f),a.addNode(h),a.connect(r.outputs.get("num"),c.inputs.get("num1")),a.connect(u.outputs.get("num"),c.inputs.get("num2")),a.connect(f.outputs.get("data"),h.inputs.get("data")),a.on("process nodecreated noderemoved connectioncreated connectionremoved",Object(s.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("process"),e.next=3,o.abort();case 3:return e.next=5,o.process(a.toJSON());case 5:case"end":return e.stop()}},e)}))),a.view.resize(),a.trigger("process"),m.a.zoomAt(a,a.nodes);case 38:case"end":return e.stop()}},e)}))).apply(this,arguments)}var S=function(){return o.a.createElement("div",{className:"App"},o.a.createElement("div",{style:{width:"100vw",height:"100vh"},ref:function(e){return e&&function(e){return P.apply(this,arguments)}(e)}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(o.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[15,1,2]]]);
//# sourceMappingURL=main.0711b7b5.chunk.js.map